<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zendesk Template Builder</title>
  </head>
  <body>
    <!-- Login overlay -->
    <div id="login-overlay" class="login-overlay">
      <div class="login-card">
        <h1>ğŸ” Zendesk Template Builder</h1>
        <p>Entrez le mot de passe pour accÃ©der Ã  l'application</p>
        <form id="login-form">
          <input type="password" id="login-password" placeholder="Mot de passe" autocomplete="current-password" />
          <button type="submit" class="btn btn-primary">Se connecter</button>
          <p id="login-error" class="login-error"></p>
        </form>
      </div>
    </div>

    <div id="app">
      <nav class="tabs">
        <button class="tab active" data-tab="builder">ğŸ§© Component Builder</button>
        <button class="tab" data-tab="assembler">ğŸ“„ Template Assembler</button>
        <button id="logout-btn" class="btn btn-secondary btn-sm" style="margin-left:auto;">DÃ©connexion</button>
        <button id="theme-toggle-btn" class="btn btn-secondary btn-sm" title="Changer le thÃ¨me">ğŸŒ™</button>
      </nav>

      <div id="builder" class="tab-content active">
        <div class="builder-layout">
          <aside class="component-list-panel">
            <h2>Mes Composants</h2>
            <div class="component-actions">
              <button id="new-component-btn" class="btn btn-primary">+ Nouveau</button>
              <button id="import-btn" class="btn btn-secondary">ğŸ“¥ Importer</button>
              <button id="export-btn" class="btn btn-secondary">ğŸ“¤ Tout exporter</button>
              <button id="trash-btn" class="btn btn-secondary">ğŸ—‘ï¸ Corbeille</button>
              <button id="select-mode-btn" class="btn btn-secondary">â˜‘ï¸ SÃ©lectionner</button>
              <button id="new-folder-btn" class="btn btn-secondary">ğŸ“ Nouveau dossier</button>
              <input type="file" id="import-file" accept=".json" hidden />
            </div>
            <div id="bulk-actions" class="bulk-actions hidden">
              <button id="bulk-export-btn" class="btn btn-secondary btn-sm">ğŸ“¤ Exporter la sÃ©lection</button>
              <button id="bulk-delete-btn" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Supprimer la sÃ©lection</button>
              <button id="bulk-cancel-btn" class="btn btn-secondary btn-sm">âœ• Annuler</button>
            </div>
            <div class="builder-filter-row">
              <input type="text" id="builder-search" placeholder="ğŸ” Rechercher..." />
              <select id="builder-sort">
                <option value="name">Aâ†’Z</option>
                <option value="date">RÃ©cents</option>
                <option value="category">CatÃ©gorie</option>
              </select>
            </div>
            <div id="component-list"></div>
          </aside>

          <main class="editor-panel">
            <div id="editor-placeholder" class="placeholder">
              <p>â† SÃ©lectionnez un composant ou crÃ©ez-en un nouveau</p>
            </div>
            <div id="editor-area" class="hidden">
              <div class="editor-header">
                <input type="text" id="component-name" placeholder="Nom du composant" />
                <select id="component-category">
                </select>
                <button id="save-component-btn" class="btn btn-primary">ğŸ’¾ Sauvegarder</button>
                <button id="copy-component-html-btn" class="btn btn-secondary">ğŸ“‹ Copier HTML</button>
                <button id="duplicate-component-btn" class="btn btn-secondary">ğŸ“‘ Dupliquer</button>
                <button id="history-component-btn" class="btn btn-secondary">ğŸ• Historique</button>
                <button id="delete-component-btn" class="btn btn-danger">ğŸ—‘ï¸ Supprimer</button>
              </div>
              <div class="editor-tags-row">
                <label>ğŸ·ï¸</label>
                <div id="component-tags" class="tags-container"></div>
                <input type="text" id="tag-input" placeholder="Ajouter un tag..." class="tag-input" />
              </div>
              <div class="editor-split">
                <div class="preview-side">
                  <h3>AperÃ§u</h3>
                  <div id="component-preview" class="preview-frame"></div>
                </div>
                <div class="code-side">
                  <h3>Code HTML</h3>
                  <div id="codemirror-container"></div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>

      <div id="assembler" class="tab-content">
        <div class="assembler-layout">
          <aside class="components-sidebar">
            <h2>Composants</h2>
            <input type="text" id="search-components" placeholder="ğŸ” Rechercher..." />
            <div id="available-components"></div>
          </aside>

          <main class="assembler-main">
            <div class="assembler-toolbar">
              <input type="text" id="template-name" placeholder="Nom du template" value="Mon Template" />
              <button id="save-template-btn" class="btn btn-secondary">ğŸ’¾ Sauvegarder</button>
              <button id="load-template-btn" class="btn btn-secondary">ğŸ“‚ Charger</button>
              <button id="clear-template-btn" class="btn btn-secondary">ğŸ—‘ï¸ Vider</button>
              <button id="copy-html-btn" class="btn btn-primary">ğŸ“‹ Copier le HTML</button>
              <button id="preview-fullscreen-btn" class="btn btn-secondary">ğŸ‘ PrÃ©visualiser</button>
              <button id="export-image-btn" class="btn btn-secondary">ğŸ–¼ï¸ Image</button>
            </div>

            <div class="assembler-split">
              <div class="drop-zone-container">
                <h3>Zone d'assemblage <small>(glissez les composants ici)</small></h3>
                <div id="drop-zone" class="drop-zone">
                  <p class="drop-placeholder">Glissez des composants depuis la sidebar</p>
                </div>
              </div>
              <div class="template-preview-container">
                <h3>AperÃ§u du template</h3>
                <div id="template-preview" class="preview-frame"></div>
              </div>
            </div>
          </main>
        </div>
      </div>

      <!-- Modal pour charger un template -->
      <div id="load-modal" class="modal hidden">
        <div class="modal-content">
          <h2>Charger un template</h2>
          <div id="saved-templates-list"></div>
          <button class="btn btn-secondary modal-close">Fermer</button>
        </div>
      </div>

      <!-- Modal corbeille -->
      <div id="trash-modal" class="modal hidden">
        <div class="modal-content">
          <div class="modal-header-row">
            <h2>ğŸ—‘ï¸ Corbeille</h2>
            <button id="empty-trash-btn" class="btn btn-danger btn-sm">Vider la corbeille</button>
          </div>
          <div id="trash-list"></div>
          <button id="trash-modal-close" class="btn btn-secondary modal-close">Fermer</button>
        </div>
      </div>

      <!-- Modal preview plein Ã©cran -->
      <div id="preview-modal" class="modal hidden">
        <div class="modal-content preview-modal-content">
          <div class="modal-header-row">
            <h2>ğŸ‘ AperÃ§u du template</h2>
            <button id="preview-modal-close" class="btn btn-secondary btn-sm">âœ• Fermer</button>
          </div>
          <iframe id="preview-iframe" class="preview-iframe"></iframe>
        </div>
      </div>

      <!-- Modal historique versions -->
      <div id="history-modal" class="modal hidden">
        <div class="modal-content">
          <h2>ğŸ• Historique des versions</h2>
          <div id="version-list"></div>
          <button id="history-modal-close" class="btn btn-secondary modal-close">Fermer</button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
